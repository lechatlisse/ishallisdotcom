/* ==========================================================================
   Core tokens
   ========================================================================== */
:root{
  --bg:#000;
  --fg:#fff;
  --accent:red;                 /* thin progress bar */

  --gap:clamp(12px,2vw,28px);
  --radius:3px;                 /* card corners */
  --header-h:50px;
  --nav-sweep:.2s;             /* hover sweep duration */

  --z-progress:10100;
  --z-header:10050;
  --z-overlay:10000;
}

/* ==========================================================================
   Base document
   ========================================================================== */
*,*::before,*::after{ box-sizing:border-box }
html,body{ height:100% }
html{ -webkit-text-size-adjust:100% }
body{
  margin:0;
  background:var(--bg);
  color:var(--fg);
  font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif;
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
}
img,video,svg,canvas{ display:block; max-width:100%; height:auto }
a{ color:inherit; text-decoration:none }
::selection{ background:#000; color:#fff }

.hidden{ display:none !important }

/* ==========================================================================
   Thin progress bar (JS drives --progress)
   ========================================================================== */
#progress{
  position:fixed; top:0; left:0; right:0;
  height:3px;
  z-index:var(--z-progress);
  pointer-events:none;
}
#progress::before{
  content:"";
  position:absolute; inset:0;
  background:var(--accent);
  opacity:.9;
  transform-origin:left;
  transform:scaleX(var(--progress,0));
  transition:transform .25s ease, opacity .35s ease .2s;
}
#progress.done{ opacity:0 }

/* ==========================================================================
   Header (single instance, always above overlay)
   ========================================================================== */
.site-header{
  position:fixed; top:0; left:0; right:0;
  z-index:var(--z-header);
  padding:12px 40px;
  background:transparent !important;
}
.nav-row{ display:flex; align-items:center; justify-content:space-between }

/* One menu for both desktop and mobile */
.links{ display:contents }      /* desktop: children are direct flex items */

.brand,.nav-link,.nav-toggle{
  color:#fff;
  font-size:16px;               /* fixed size; no auto scaling */
  line-height:1;
  text-decoration:none;
}
.brand{ font-weight:400; padding:8px 0 }

/* Shared link styling + bigger hit-area (no layout shift) */
.nav-link,.brand{
  display:inline-block; position:relative; overflow:hidden;
  transition:opacity .2s;
  --hit-x:10px; --hit-y:6px;    /* tweak hit area */
  padding:calc(8px + var(--hit-y)) var(--hit-x);
  margin:calc(-1 * var(--hit-y)) calc(-1 * var(--hit-x));
}

/* === Hover sweep (behind text, left→right; one-way) === */
.nav-link::before,.brand::before{
  content:"";
  position:absolute; top:50%; left:50%;
  height:5px;
  width:calc(100% - (2 * var(--hit-x,10px)) + 14px); /* word width +14px */
  background:#fdfed0; border-radius:3px;
  z-index:-1; pointer-events:none;
  clip-path:inset(0 100% 0 0);                 /* hidden at rest */
  transform:translate(-50%,-50%);
}
.nav-link:not(.is-current):hover::before,
.brand:hover::before{
  clip-path:inset(0 0 0 0);
  transition:clip-path var(--nav-sweep) cubic-bezier(.7,0,.3,1);
}

/* === Current page: static bar behind word === */
.nav-link.is-current{ z-index:0 }
.nav-link.is-current::before{ display:none }    /* no hover sweep on current */
.nav-link.is-current::after{
  content:"";
  position:absolute; left:50%; top:50%;
  transform:translate(-50%,-50%);
  height:5px;
  width:calc(100% - (2 * var(--hit-x,10px)) + 14px);
  background:#fdfed0; border-radius:3px;
  z-index:-1;
}

/* Toggle button (desktop hidden) */
.nav-toggle{ display:none; border:0; background:transparent; padding:6px 0; cursor:pointer }
.menu-close{ display:none !important; }

/* ===== Mobile panel ===== */
@media (max-width:800px){
  .nav-toggle{ display:inline-block; margin-left:auto }

  .links{
    display:flex; flex-direction:column; gap:10px;
    position:fixed; top:15px; right:15px;
    width:max-content; min-width:200px;
    padding:16px 22px;
    background:#fdfed0; border-radius:6px;
    transform:translateX(120%); transition:transform .28s ease;
  }
  .nav-link{ color:#000; padding:10px 2px; text-align:left }
  .nav-link::before,.brand::before,
  .nav-link.is-current::after{ display:none }    /* no bars in panel */

  .menu-close{
    display:inline-flex;                 /* show only on mobile */
    align-items:center; justify-content:center;
    position:absolute; top:8px; right:8px;
    width:34px; height:34px;
    border:0; border-radius:6px;
    background:rgba(0,0,0,.08);
    color:#000; font-size:20px; line-height:1;
    cursor:pointer;
  }
  .menu-close:hover{ background:rgba(0,0,0,.14) }
}

/* Panel open (toggled on <html>) */
.nav-open .links{ transform:translateX(0) }
.nav-open,.nav-open body{ overflow:hidden }     /* lock page scroll while open */

/* ==========================================================================
   Main content + fade-in (JS removes .fade)
   ========================================================================== */
#content{ opacity:1; transition:opacity 1.2s }
#content.fade{ opacity:0; transition:none }

/* ==========================================================================
   Project card geometry (hero + tiles share this)
   ========================================================================== */
.project{
  position:relative; display:block;
  aspect-ratio:16/9;
  border-radius:var(--radius);
  overflow:hidden;
}
.project > :is(video,img,iframe){
  position:absolute; inset:0;
  width:100%; height:100%;
  object-fit:cover; border:0; background:#000;
}

/* Hero (non-clickable) spacing + height cap */
.project.hero-tile{ 
  margin-bottom:var(--gap);
  max-height:80vh;
  width:100%; /* Force full width */
}

/* ==========================================================================
   Projects grid (2–1–2–1 cadence)
   ========================================================================== */
.projects .grid{
  display:grid;
  grid-template-columns:repeat(2, minmax(0,1fr));
  gap:var(--gap);
  align-items:start;
  grid-auto-flow:dense;
}
.projects .grid > a.project{ color:inherit }
.projects .grid > a.project:nth-child(3n){ grid-column:1 / -1 }

/* Aspect-ratio fallback for very old browsers */
@supports not (aspect-ratio:1/1){
  .project::before{ content:""; display:block; padding-top:56.25% }
  .project > :is(video,img,iframe){ position:absolute }
}

/* Overlay text (title centered, others below, auto-collapse empties) */
.project .overlay{
  position:absolute; inset:0;
  display:flex; flex-direction:column; align-items:center; justify-content:center;
  text-align:center; color:#fff; padding:clamp(8px,2vw,24px);
  pointer-events:none;
}
.project .title{
  font-weight:700; line-height:1.2;
  font-size:clamp(1rem, 2.2vw + .5rem, 2.4rem);
  margin:.15em 0; max-width:90%;
  text-wrap:balance;
}
.project .subtitle{
  font-weight:500; line-height:1.2;
  font-size:clamp(.9rem, 1.6vw + .3rem, 1.3rem);
  margin:.15em 0;
}
.project .caption{
  font-weight:400; line-height:1.25;
  font-size:clamp(.8rem, 1.2vw + .2rem, 1.05rem);
  margin:.15em 0; opacity:.9;
}
.project .subtitle:empty,.project .caption:empty{ display:none }

/* Responsive single column */
@media (max-width:660px){
  .projects .grid{ grid-template-columns:1fr }
  .projects .grid > a.project{ grid-column:1 / -1 }
}

/* ==========================================================================
   Fullscreen player overlay (no animations — pop on/off)
   ========================================================================== */
#player{
  position:fixed; inset:0;
  background:rgba(0,0,0,.85);
  z-index:var(--z-overlay);
}
#player .player-panel{ position:absolute; inset:0 }
#player .player-wrap{ position:absolute; inset:0; background:#000 }

/* Close button aligned below header line */
#player .player-close{
  position:absolute; top:calc(var(--header-h) + 12px); right:16px;
  z-index:20;
  width:40px; height:40px; line-height:40px; text-align:center;
  border:0; border-radius:999px; cursor:pointer;
  background:rgba(0,0,0,.5); color:#fff; font-size:20px;
  backdrop-filter:blur(6px);
}

/* ===== Shared player title overlay (modal & project pages) ===== */
.player-title{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  text-align:center; color:#fff;
  padding:clamp(12px,2vw,32px);
  z-index:4;                    /* poster=1, controls=3; title sits above both */
  pointer-events:none;          /* never blocks clicks */
  opacity:1; transition:opacity .5s ease;
}
.player-title.is-hidden{ opacity:0 }

.player-title__inner{ max-width:min(90ch, 80vw) }
.player-title__text{
  font-weight:700; letter-spacing:.01em; line-height:1.1;
  font-size:clamp(1.3rem, 2.6vw + .4rem, 3.2rem);
}
.player-title__sub{
  margin-top:.45em; font-weight:500; opacity:.9;
  font-size:clamp(.95rem, 1.2vw + .3rem, 1.25rem);
}

/* smooth fades for title / cta (target modal-style classes) */
.player-title__text { transition: opacity .5s ease; }
.player-title__sub  { transition: opacity .3s ease; opacity: 1; }

/* utility class we toggle from JS */
.player-title .is-hidden { opacity: 0; }

/* Lock page scroll while overlay is open */
html.modal-open,body.modal-open{ overflow:hidden }

/* ==========================================================================
   PLYR: overlay + project pages (viewport-pinned controls)
   ========================================================================== */
.plyr{
  position:absolute; inset:0;
  --plyr-color-main:#fdfed0;

  /* subtle sizing tweaks (optional) */
  --plyr-control-spacing:10px;
  --plyr-control-padding:6px;
  --plyr-range-track-height:10px;
  --plyr-range-thumb-height:12px;
  --plyr-range-thumb-width:12px;

  --plyr-video-progress-buffered-background:rgba(253,254,208,.5);
  --plyr-video-range-track-background:rgba(255,255,255,.1);
}

.plyr .poster-veil{
  position:absolute; inset:0;
  background-position:center; background-size:cover; background-repeat:no-repeat;
  opacity:1; transition:opacity 1s ease;
  pointer-events:none; z-index:1;
}

/* Controls layer above poster */
.plyr__controls{ position:relative; z-index:3 }
.plyr__time{ font-weight:bold }

/* Progress shapes (square) */
.plyr__progress,
.plyr__progress input[type=range],
.plyr__progress progress,
.plyr__progress__buffer{
  border-radius:0 !important; background-clip:padding-box;
}
.plyr__progress input[type="range"]::-webkit-slider-runnable-track{ height:var(--plyr-range-track-height) !important; border-radius:0 !important }
.plyr__progress input[type="range"]::-moz-range-track{ border-radius:0 !important }
.plyr__progress input[type="range"]::-ms-track{ border-radius:0 !important }

/* Remove diagonal buffering stripes + spinner */
.plyr__progress__buffer{ background:rgba(255,255,255,.25) !important; background-image:none !important; animation:none !important; border-radius:0 !important }
.plyr__spinner{ display:none !important }

/* Hide scrubber knob */
.plyr--full-ui .plyr__progress input[type="range"]{ -webkit-appearance:none; appearance:none; background:transparent }
.plyr--full-ui .plyr__progress input[type="range"]::-webkit-slider-thumb,
.plyr--full-ui .plyr__progress input[type="range"]::-moz-range-thumb,
.plyr--full-ui .plyr__progress input[type="range"]::-ms-thumb{
  width:0 !important; height:0 !important; background:transparent !important; border:0 !important; box-shadow:none !important;
}

/* Hide tooltip entirely */
.plyr__tooltip{ display:none !important }

/* ===== Overlay variant ===== */
#player .player-wrap{ overflow:hidden }
#player .player-wrap .plyr{ position:absolute; inset:0 }
#player .player-wrap .plyr__video-embed{
  position:absolute; top:50%; left:50%;
  width:max(100vw, calc(100vh * 16 / 9));
  height:max(100vh, calc(100vw * 9 / 16));
  transform:translate(-50%,-50%);
  z-index:1;
}
#player .player-wrap .plyr__controls{ padding:clamp(8px,1.6vw,14px) }

/* Built-in poster layer polish */
.plyr__poster{
  background-position:center !important;
  background-size:cover !important;
  background-repeat:no-repeat !important;
  opacity:1; transition:opacity .5s ease;
}

/* Square the <progress> element fully (engine quirks) */
.plyr__progress progress{ border-radius:0 !important; overflow:hidden }
.plyr__progress progress::-webkit-progress-bar,
.plyr__progress progress::-webkit-progress-value{ border-radius:0 !important }
.plyr__progress progress::-moz-progress-bar{ border-radius:0 !important }

/* ===== Project page variant ===== */
.qqqproject-page .video-embed{ position:relative; aspect-ratio:16/9; background:#000 }
.project-page .video-embed .plyr{ position:absolute; inset:0 }
.project-page .video-embed .plyr__video-embed{ position:absolute; inset:0; z-index:1 }

/* ===== Project page variant (full-bleed like the modal) ===== */
.project-page { min-height: 100vh; }

.project-page .video-embed{
  position: fixed; inset: 0;
  background:#000;
}

.project-page .video-embed .plyr{ position:absolute; inset:0; }

.project-page .video-embed .plyr__video-embed{
  position:absolute; top:50%; left:50%;
  right:auto; bottom:auto;                    /* <-- neutralize earlier inset */
  width:max(100vw, calc(100vh * 16 / 9));
  height:max(100vh, calc(100vw * 9 / 16));
  transform:translate(-50%, -50%);
  z-index:1;
}

.project-page .plyr__controls{
  padding: clamp(8px, 1.6vw, 14px);
}

/* ========= INFO PAGE THEME ========= */
.page-info {
  --info-bg: #f4f2eb;        /* page bg */
  --info-fg: #121212;        /* text color */
  --sweep-color: #fdfed0;    /* your existing accent */
}

.page-info { background: var(--info-bg); color: var(--info-fg); }

/* Make header/nav dark on this page (no background) */
.page-info .site-header,
.page-info .site-header a,
.page-info .brand,
.page-info .site-nav .nav-link,
.page-info .nav-toggle { color: var(--info-fg); }

/* ========= INFO LAYOUT ========= */
.info {
  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: 80px 40px;         /* keeps clear of header on small screens */
}

.info__wrap {
  width: 70vw;                /* as requested */
  max-width: 1100px;
  display: grid;
  gap: 32px;
}

/* Typography — same size across breakpoints (no fluid scaling) */
.info__lead,
.info__links { 
  font-size: 16px;
  line-height: 1.45;
  letter-spacing: 0.01em;
}

/* Horizontal link paragraphs */
.info__links {
  display: flex;
  flex-wrap: wrap;
  gap: 22px;
}

/* ========= Sweep-bar hover (reuses your nav feel) ========= */
/* Clean one-way sweep for Info links */
.page-info .sweep-link{
  position: relative;
  display: inline-block;
  color: inherit;
  text-decoration: none;
  padding: 0 6px;
  z-index: 0;                   /* slightly larger hit area */
}

.page-info .sweep-link::after{
  z-index: -1;
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  height: 5px;
  width: calc(100% + 14px);          /* word width + 7px each side */
  transform: translate(-50%, -50%);
  background: var(--sweep-color, #fdfed0);
  border-radius: 3px;

  /* Hidden at rest; prevents any sliver from showing */
  clip-path: inset(0 100% 0 0);
  transition: clip-path var(--nav-sweep, 320ms) cubic-bezier(.7,0,.3,1);
  pointer-events: none;
}

.page-info .sweep-link:hover::after{
  /* Sweep left → right once */
  clip-path: inset(0 0 0 0);
}

/* Mobile: keep 70vw feel but never go edge-to-edge */
@media (max-width: 720px) {
  .info__wrap { width: 86vw; }
  .info__links { gap: 16px; }
}

/* Info page layout & centering */
.page-info .info { 
  min-height: 100dvh;
  display: grid;
  place-items: center;
  padding: 80px 40px;
}

.page-info .info__wrap{
  width: 70vw;
  max-width: 1100px;
  display: grid;
  gap: 32px;
  text-align: center;         /* center paragraph text */
}

/* Link rows centered */
.page-info .info__links{
  display: flex;
  flex-wrap: wrap;
  gap: 22px;
  justify-content: center;    /* center the horizontal lists */
}